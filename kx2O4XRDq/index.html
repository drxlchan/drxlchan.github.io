<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="keywords" content="Gridea静态个人博客">
<meta name="description" content="精其所以">
<meta name="theme-color" content="#000">
<title>Ubuntu强化学习平台搭建 | Jeffrey X.L. Chan</title>
<link rel="shortcut icon" href="/favicon.ico?v=1591934737359">
<link rel="stylesheet" href="/styles/main.css">
<link rel="stylesheet" href="/media/css/mist.css">

<link rel="stylesheet" href="/media/fonts/font-awesome.css">
<link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Rosario:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">

<link href="/media/hljs/styles/androidstudio.css" rel="stylesheet">  

<script src="/media/hljs/highlight.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/velocity-animate@1.5.0/velocity.ui.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>



    <meta name="description" content="Ubuntu强化学习平台搭建" />
    <meta name="keywords" content="平台搭建" />
  </head>
  <body>
    <div class="head-top-line"></div>
    <div class="header-box">
      
<div class=" mist">
  <header class="header bg-color ">
    <div class="blog-header box-shadow-wrapper  " id="header">
      <div class="nav-toggle" id="nav_toggle">
        <div class="toggle-box">
          <div class="line line-top"></div>
          <div class="line line-center"></div>
          <div class="line line-bottom"></div>
        </div>
      </div>
      <div class="site-meta">       
        <div class="site-title">
          
            <a href="/" class="">
              <span class="logo-line-before">
                <i class=""></i>
              </span>
              <span class="main-title">Jeffrey X.L. Chan</span>
              <span class="logo-line-after">
                <i class=""></i>
              </span>
            </a>  
          
        </div>
        
      </div>
      <nav class="site-nav" id="site_nav">
        <ul id="nav_ul">
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://drxlchan.github.io" target="_self">
                  <i class="fa fa-globe"></i> 首页
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://drxlchan.github.io/archives" target="_self">
                  <i class="fa fa-globe"></i> 归档
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://drxlchan.github.io/tags" target="_self">
                  <i class="fa fa-globe"></i> 标签
                </a>
              
            </li>
          
            
            
              
            
            <li class="nav-item ">
              
              
                <a href="https://drxlchan.github.io/about" target="_self">
                  <i class="fa fa-globe"></i> 关于
                </a>
              
            </li>
          
          
            
              <li class="nav-item ">
                <a href="/friends" target="_self">
                  
                    fa-ship友情链接
                  
                </a>
              </li>
            
          
        </ul>
      </nav>
    </div>
  </header>
</div>

<script type="text/javascript"> 
 
  let showNav = true;

  let navToggle = document.querySelector('#nav_toggle'),
  siteNav = document.querySelector('#site_nav');
  
  function navClick() {
    let sideBar = document.querySelector('.sidebar');
    let navUl = document.querySelector('#nav_ul');
    navToggle.classList.toggle('nav-toggle-active');
    siteNav.classList.toggle('nav-menu-active');
    if (siteNav.classList.contains('nav-menu-active')) {
      siteNav.style = "height: " + (navUl.children.length * 42) +"px !important";
    } else {
      siteNav.style = "";
    }
  }

  navToggle.addEventListener('click',navClick);  
</script>
    </div>
    <div class="main-continer">
      
      <div class="section-layout mist bg-color">
        <div class="section-layout-wrapper">
          

<div class="sidebar">
  
    <div class="sidebar-box box-shadow-wrapper  right-motion" id="sidebar">
      
      <div class="sidebar-body mist" id="sidebar_body">
        
          
            <div style="opacity: 1;">
              <div class="toc-box right-motion">
  <div class="toc-wrapper auto-number auto" id="toc_wrapper">
    <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E8%BF%81%E7%A7%BB%E6%96%B9%E6%B3%95%E4%B8%8E%E6%AD%A5%E9%AA%A4">迁移方法与步骤</a>
<ul>
<li><a href="#sumo%E5%AE%89%E8%A3%85">SUMO安装</a>
<ul>
<li><a href="#optional-direct-install-of-sumo-from-github">(Optional) Direct install of SUMO from GitHub</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
</div>

<script>

let lastTop = 0, lList = [], hList = [], postBody, lastIndex = -1; 
let active = 'active-show', activeClass = 'active-current';
let tocWrapper = document.querySelector('#toc_wrapper');
let tocContent = tocWrapper.children[0];
let autoNumber = tocWrapper&&tocWrapper.classList.contains('auto-number');

function addTocNumber(elem, deep) {
  if (!elem) {
    return;
  }
  let prop = elem.__proto__;

  if (prop === HTMLUListElement.prototype) {
    for (let i = 0; i < elem.children.length; i++) {
      addTocNumber(elem.children[i], deep + (i + 1) + '.');
    }
  } else if (prop === HTMLLIElement.prototype) {
    // 保存li元素
    if (elem.children[0].__proto__ === HTMLAnchorElement.prototype) {
      lList.push(elem);
    }
    for (let i = 0; i < elem.children.length; i++) {
      let cur = elem.children[i];
      if (cur.__proto__ === HTMLAnchorElement.prototype) {
        if (autoNumber) {
          cur.text =  deep + ' ' + cur.text;
        }
      } else if (cur.__proto__ === HTMLUListElement.prototype) {
        addTocNumber(cur, deep);
      }
    }
  }
}

function removeParentActiveClass() {
  let parents = tocContent.querySelectorAll('.'+active)
  parents.forEach(function(elem) {
    elem.classList.remove(active);
  });
}

function addActiveClass(index) {
  if (index >= 0 && index < hList.length) {
    lList[index].classList.add(activeClass);
  }
}

function removeActiveClass(index) {
  if (index >= 0 && index < hList.length) {
    lList[index].classList.remove(activeClass);
  }
}

function addActiveLiElemment(elem, parent) {
  if (!elem || elem === parent) {
    return;
  } else {
    if (elem.__proto__ === HTMLLIElement.prototype) {
      elem.classList.add(active);
    }
    addActiveLiElemment(elem.parentElement, parent);
  }
}

function showToc() {
  if (tocWrapper) {
    postBody = document.querySelector('#post_body');
    for (let i = 0; i < postBody.children.length; i++) {
      if (postBody.children[i].__proto__ === HTMLHeadingElement.prototype) {
        hList.push(postBody.children[i]);
      }
    }
    if (tocWrapper.classList.contains('compress')) {
        tocContent.classList.add('closed');
    } else if (tocWrapper.classList.contains('no_compress')){
      tocContent.classList.add('expanded');
    } else {
      if (hList.length > 10) {
        active = 'active-hidden'
        tocContent.classList.add('closed');
      } else {
        tocContent.classList.add('expanded');
      }
    }
  }
}

(function() {
  // 处理不是从#一级标题开始目录
  if (tocContent.children.length === 1 && tocContent.children[0].__proto__ === HTMLLIElement.prototype) {
    let con = tocContent.children[0].children[0];
    tocContent.innerHTML = con.innerHTML;
  }
  let markdownItTOC = document.querySelector('.markdownIt-TOC');
  let innerHeight = window.innerHeight;
  markdownItTOC.style = `max-height: ${innerHeight - 80 > 0 ? innerHeight - 80 : innerHeight}px`
  addTocNumber(tocContent, '');
})();

document.addEventListener('scroll', function(e) {
  if (lList.length <= 0) {
    return;
  }
  let scrollTop = document.scrollingElement.scrollTop + 10;
  let dir;

  if (lastTop - scrollTop > 0) {
    dir = 'up';
  } else {
    dir = 'down';
  }

  lastTop = scrollTop;
  if (scrollTop <= 0) {
    if (lastIndex >= 0 && lastIndex < hList.length) {
      lList[lastIndex].classList.remove(activeClass);
    }
    return;
  }

  let current = 0, hasFind = false;
  for (let i = 0; i < hList.length; i++) {
    if (hList[i].offsetTop > scrollTop) {
      current = i;
      hasFind = true;
      break;
    }
  }
  if (!hasFind && scrollTop > lList[lList.length - 1].offsetTop) {
    current = hList.length - 1;
  } else {
    current--;
  }
  if (dir === 'down') {
    if (current > lastIndex) {
      addActiveClass(current);
      removeActiveClass(lastIndex) 
      lastIndex = current;
      removeParentActiveClass();
      lList[current] && addActiveLiElemment(lList[current].parentElement,tocContent);
    }
  } else {
    if (current < lastIndex) {
      addActiveClass(current);
      removeActiveClass(lastIndex);
      lastIndex = current;
      removeParentActiveClass();
      lList[current] && addActiveLiElemment(lList[current].parentElement,tocContent);
    }
  }
});

window.addEventListener('load', function() {
  showToc();
  document.querySelector('#sidebar').style='display: block;';
  tocWrapper.classList.add('toc-active');
  setTimeout(function() {
    if ("createEvent" in document) {
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("scroll", false, true);
      document.dispatchEvent(evt);
    }
    else {
      document.fireEvent("scroll");
    }
  }, 500)
})

</script>
            </div>
          
        
      </div>
    </div>
  
</div>
<script>
  const SIDEBAR_TITLE_ACTIVE = 'sidebar-title-active';
  const SIDEBAR_BODY_ACTIVE = 'sidebar-body-active';
  const SLIDE_UP_IN = 'slide-up-in';

  let sidebar = document.querySelector('#sidebar'),
  tocSideBar = document.querySelector('#tocSideBar'),
  metaSideBar = document.querySelector('#metaSideBar'),
  postToc = document.querySelector('#post_toc'),
  postSiteMeta = document.querySelector('#post_side_meta'),
  sidebarTitle = document.querySelector('.sidebar-title'),
  sidebarBody = document.querySelector('#sidebar_body');

  tocSideBar && tocSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  metaSideBar && metaSideBar.addEventListener('click', (e) => {
    toggleSidebar(e);
  });

  function toggleSidebar(e) {
    let currentTitle = document.querySelector("."+SIDEBAR_TITLE_ACTIVE);
    if (currentTitle == e.srcElement) {
      return ;
    }
    let current, showElement, hideElement;
    if (e.srcElement == metaSideBar) {
      showElement = postSiteMeta;
      hideElement = postToc;
    } else if (e.srcElement == tocSideBar){
      showElement = postToc;
      hideElement = postSiteMeta;
    }
    currentTitle.classList.remove(SIDEBAR_TITLE_ACTIVE);
    e.srcElement.classList.add(SIDEBAR_TITLE_ACTIVE);

    window.Velocity(hideElement, 'stop');
    window.Velocity(hideElement, 'transition.slideUpOut', {
      display: 'none',
      duration: 200,
      complete: function () {
        window.Velocity(showElement, 'transition.slideDownIn', {
          duration: 200
        });
      }
    })
    hideElement.classList.remove(SIDEBAR_BODY_ACTIVE);
    showElement.classList.add(SIDEBAR_BODY_ACTIVE);
  }

  postToc && postToc.addEventListener('transitionend', function() {
    this.classList.remove(SLIDE_UP_IN);
  });

  if (sidebarBody) {
    if (sidebarBody.classList.contains('pisces') || sidebarBody.classList.contains('gemini')) {
      let hasFix = false;
      let scrollEl = document.querySelector('.main-continer');
      let limitTop = document.querySelector('#nav_ul').children.length * 42 + 162;
      window.addEventListener('scroll', function(e) {
        if (document.scrollingElement.scrollTop >= limitTop) {
          if (!hasFix) {
            sidebar.classList.add('sidebar-fixed');
            hasFix = true;
          }
        } else {
          if (hasFix) {
            sidebar.classList.remove('sidebar-fixed');
            hasFix = false;
          }
        }
      });
    }
  }
  
</script>
          <div class="section-box box-shadow-wrapper">
            <div class="section bg-color post post-page">
              <header class="post-header">
  <h1 class="post-title">
    <a class="post-title-link" href="https://drxlchan.github.io/kx2O4XRDq/">
      Ubuntu强化学习平台搭建
    </a>
  </h1>
  <div class="post-meta">
    
    <span class="meta-item pc-show">
      <i class="fa fa-calendar-o"></i>
      <span>发布于</span>
      <span>2020-04-12</span>
      <span class="post-meta-divider pc-show">|</span>
    </span>
    
      <span class="meta-item">
        <i class="fa fa-folder-o"></i>
        <span class="pc-show">分类于</span>
        
          
            <a href="https://drxlchan.github.io/yE-Vsna4c/">
              <span>平台搭建</span>
            </a>
          
        
      </span>
      <span class="post-meta-divider">|</span>
    
    <span class="meta-item">
      <i class="fa fa-clock-o"></i>
      <span>6分钟</span>
    </span>
    <span class="meta-item">
      <span class="post-meta-divider">|</span>
      <i class="fa fa-file-word-o"></i>
      <span>1139<span class="pc-show">字数</span></span>
    </span>
    
  </div>
</header>
              <div class="post-body next-md-body" id="post_body">
                <p>Anaconda环境迁移</p>
<p>anaconda base 3.7.4</p>
<p>mujoco-py环境还没有配置安装mujoco-py因为注册表的原因</p>
<figure data-type="image" tabindex="1"><img src="http://raw.githubusercontent.com/Jeffrey28/Figurebed/master/img/20200412095201.png" alt="" loading="lazy"></figure>
<p>flow环境安装还有问题：已解决</p>
<figure data-type="image" tabindex="2"><img src="http://raw.githubusercontent.com/Jeffrey28/Figurebed/master/img/20200408145507.png" alt="" loading="lazy"></figure>
<p>tf-keras-rl</p>
<p>pip安装所需包时，出现错误</p>
<p>好像是pillow的问题，已解决。更换了一下安装顺序，把pillow最后安装</p>
<h2 id="迁移方法与步骤">迁移方法与步骤</h2>
<ul>
<li>
<p>安装Jetbrain toolbox，然后更改安装位置，安装pycharm</p>
</li>
<li>
<p>安装anaconda，下载anaconda的包，bash安装</p>
<ul>
<li>
<p>原环境备份导出：</p>
<pre><code class="language-powershell"># 激活将导出的环境
conda activate environment
# 将原有服务器上面的环境导出
conda env export &gt; environment.yaml
# 导出pip安装的包
pip freeze &gt; requirement.txt
</code></pre>
</li>
<li>
<p>目标机执行导入环境操作：</p>
<pre><code class="language-powershell">conda env create -f environment.yaml
# 进入新建的环境
conda activate environment
pip install -r requirement.txt
</code></pre>
</li>
<li>
<p>检查tensorflow环境，pytorch环境，GPU，cuda等是否安装</p>
<pre><code class="language-powershell">python
import tensorflow as tf
tf.test.is_built_with_cuda()
tf.test.is_gpu_available() # 目前返回False说明还存在问题
</code></pre>
</li>
</ul>
</li>
<li>
<p><a href="#SUMO%E5%AE%89%E8%A3%85">SUMO安装</a></p>
</li>
<li>
<p>安装下载Flow</p>
</li>
<li>
<p>使用google Chrome，并且配置翻墙插件</p>
</li>
<li>
<p>搜狗输入法安装，记得把搜狗输入法置于第二位，不会显示乱码</p>
</li>
</ul>
<h3 id="sumo安装">SUMO安装</h3>
<p>目前进展：<a name="SUMO安装"></a></p>
<ul>
<li>
<p>根据flow的安装教程安装flow与sumo：https://github.com/flow-project/flow/blob/master/docs/source/flow_setup.rst#optional-direct-install-of-sumo-from-github</p>
</li>
<li>
<p>sumo安装出现问题：</p>
<pre><code class="language-powershell">(base) ubuntu@host-192-168-96-5:~/data/sumo$ sudo apt-get install proj  libtool libgdal1-dev libxerces-c2-dev libfox-1.6-0 libfox-1.6-dev
sudo: unable to resolve host host-192-168-96-5
Reading package lists... Done
Building dependency tree       
Reading state information... Done
Package libxerces-c2-dev is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

Package proj is not available, but is referred to by another package.
This may mean that the package is missing, has been obsoleted, or
is only available from another source

E: Package 'proj' has no installation candidate
E: Package 'libxerces-c2-dev' has no installation candidate

</code></pre>
<h4 id="optional-direct-install-of-sumo-from-github"><a href="https://github.com/flow-project/flow/blob/master/docs/source/flow_setup.rst#id13">(Optional) Direct install of SUMO from GitHub</a></h4>
<p>The below commands walk you through installing and building SUMO locally. Note that if this does not work, you are recommended to point an issue on the flow-dev message board or refer to SUMO's <a href="http://sumo.dlr.de/wiki/Installing/Linux_Build">documentation</a> regarding installing their software.</p>
<p>We begin by downloading SUMO's github directory:</p>
<pre><code class="language-powershell">cd ~
git clone https://github.com/eclipse/sumo.git
cd sumo
git checkout 2147d155b1
make -f Makefile.cvs
</code></pre>
<p>If you have Ubuntu 14.04+, run the following command</p>
<pre><code class="language-powershell">./configure
make -j$nproc
echo 'export SUMO_HOME=&quot;$HOME/sumo&quot;' &gt;&gt; ~/.bashrc
echo 'export PATH=&quot;$HOME/sumo/bin:$PATH&quot;' &gt;&gt; ~/.bashrc
echo 'export PYTHONPATH=&quot;$HOME/sumo/tools:$PYTHONPATH&quot;' &gt;&gt; ~/.bashrc
source ~/.bashrc
</code></pre>
<p>按照上面教程走到./configure之后出现错误：</p>
<pre><code class="language-powershell">Optional features summary
-------------------------
Enabled: PROJ GDAL GUI
Disabled: Debug Profiling Coverage PIC UnitTests Python OSG ffmpeg
</code></pre>
<p>不用去管上述的错误，直接进行。要注意的是安装apt-get依赖的时候要根据第四个教程的ubuntu14.04的，而不是12.04的.。然后后续安装按照flow的教程</p>
<p>主要根据第四份的教程<br>
<img src="http://raw.githubusercontent.com/Jeffrey28/Figurebed/master/img/20200409114149.png" alt="1553240002264" loading="lazy"></p>
<pre><code class="language-powershell">     git checkout 2147d155b1
 297  make -f Makefile.cvs
 298  ./configure
 299  sudo apt-get install autoconf
 300  sudo apt-get install proj  libtool libgdal1-dev libxerces-c2-dev libfox-1.6-0 libfox-1.6-dev
 301  sudo ./configure --with-fox-includes=/usr/include/fox-1.6 --with-gdal-includes=/usr/include/gdal --with-proj-libraries=/usr/lib --with-gdal-libraries=/usr --with-proj-gdal
 302  sudo apt-get install autoconf
 303  sudo apt-get install libproj-dev proj-bin proj-data  libtool libgdal1-dev libxerces-c3-dev libfox-1.6-0 libfox-1.6-dev
 304  cd /usr/lib
 305  sudo ln -s libgdal1.7.0.so libgdal.so
 306  sudo ln -s libproj.so.0.7.0 proj-lib.so
 309  cd ~
 310  cd sumo
 311  cd data
 312  cd sumo
 313  sudo aclocal
 314  sudo automake
 315  sudo automake --add-missing
 316  sudo ./configure --with-fox-includes=/usr/include/fox-1.6 --with-gdal-includes=/usr/include/gdal --with-proj-libraries=/usr/lib --with-gdal-libraries=/usr --with-proj-gdal
 317  sudo make -j$nproc
 318  echo 'export SUMO_HOME=&quot;/home/ubuntu/data/sumo&quot;' &gt;&gt; ~/.bashrc
 319  echo 'export PATH=&quot;/home/ubuntu/data/sumo/bin:$PATH&quot;' &gt;&gt; ~/.bashrc
 320  echo 'export PYTHONPATH=&quot;/home/ubuntu/data/sumo/tools:$PYTHONPATH&quot;' &gt;&gt; ~/.bashrc
 321  source ~/.bashrc
 322  sumo-gui
 323  sumo
 324  echo $SUMO_HOME
(base) ubuntu@host-192-168-96-5:~/data/sumo$ 
</code></pre>
<p>用上述方法就不需要移动sumo文件到处都是，就在data/sumo下面，这样就比较清晰</p>
<p>要使用pycharm还要设置环境变量SUMO_HOME和添加tools:</p>
<p>安装完成后：确保sumo-*下有四个文件夹--未必</p>
<p>而且在终端命令行输入sumo或者sumo-gui都可以执行</p>
<p>最后更改环境变量gedit ~/.bashrc source ~/.bashrc</p>
</li>
<li>
<p>如果使用的是pycharm编译器，需要更改edit Configurations与Project Structure</p>
<p>Edit Configurations：RUN下面，是添加SUMO_HOME环境变量，即sumo-*所在的位置</p>
<p>Project Structure：添加sumo下的tools文件夹路径。file -&gt;settings -&gt;project -&gt;project structure -&gt;Add Content Root -&gt;选择sumo的tools文件夹路径 -&gt;ok</p>
</li>
<li>
<p>或者从终端启用Pycharm</p>
<p>具体原因来自于<a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/205817519-PyCharm-ignoring-LD-LIBRARY-PATH-from-bashrc">PyCharm ignoring LD_LIBRARY_PATH from .bashrc</a></p>
</li>
</ul>
<hr>
<p>tf_gpu_env下安装mujoco的情况：</p>
<p>按照教程已安装好mujoco150，运行：</p>
<pre><code class="language-powershell">./simulate ../model/humanoid.xml
</code></pre>
<p>结果：</p>
<figure data-type="image" tabindex="3"><img src="http://raw.githubusercontent.com/Jeffrey28/Figurebed/master/img/20200409173112.png" alt="" loading="lazy"></figure>
<p>出现无法显示的问题，先暂且到这儿。</p>

              </div>
              <div class="post-footer">
  <ul class="post-copyright">
    <li class="post-copyright-author">
      <strong>本文作者：</strong>
      Jeffrey X.L. Chan
    </li>
    <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://drxlchan.github.io/kx2O4XRDq/" title="Ubuntu强化学习平台搭建">Ubuntu强化学习平台搭建</a>
    </li>
    <li class="post-copyright-license">
      <strong>版权声明： </strong>
      本博客所有文章除特别声明外，转载请注明出处！
    </li>
  </ul>
  <div class="tags">
    
      <a href="https://drxlchan.github.io/yE-Vsna4c/"># 平台搭建</a>
    
  </div>
  <div class="nav">
    <div class="nav-prev">
      
        <i class="fa fa-chevron-left"></i>
        <a class="nav-pc-next" title="在Ubuntu上使用rclone挂载OneDrive网盘" href="https://drxlchan.github.io/vWFOyOWOp/">在Ubuntu上使用rclone挂载OneDrive网盘</a class="nav-pc-next">
        <a class="nav-mobile-prev" title="在Ubuntu上使用rclone挂载OneDrive网盘" href="https://drxlchan.github.io/vWFOyOWOp/">上一篇</a>
      
    </div>
    <div class="nav-next">
      
        <a class="nav-pc-next" title="Ubuntu修改屏幕分辨率" href="https://drxlchan.github.io/LMqad0C__/">Ubuntu修改屏幕分辨率</a>
        <a class="nav-mobile-next" title="Ubuntu修改屏幕分辨率" href="https://drxlchan.github.io/LMqad0C__/">下一篇</a>
        <i class="fa fa-chevron-right"></i>
      
    </div>
  </div>
</div>
              
  
    
      <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>
  var gitalk = new Gitalk({
    clientID: '507d6537c02949fc9fcf',
    clientSecret: 'd79b97c069578bdff893c6d912ad6019f4f6e43a',
    repo: 'jeffrey28.github.io',
    owner: 'jeffrey28',
    admin: ['jeffrey28'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })
  gitalk.render('gitalk-container')
</script>
    
    
  

            </div>
          </div>
        </div>
      </div>
      <div class="footer-box">
  <footer class="footer">
    <div class="copyright">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | © 2019-2020 Theme By <a href="https://github.com/hsxyhao/gridea-theme-next" target="_blank">HsxyHao</a>
    </div>
    <div class="poweredby">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
    </div>
  </footer>
  
  
    <div class="drawer-box right" id="drawer_box">
      <span class="muse-line muse-line-first"></span>
      <span class="muse-line muse-line-middle"></span>
      <span class="muse-line muse-line-last"></span>
    </div>
  
  <div class="mist back-to-top" id="back_to_top">
    <i class="fa fa-arrow-up"></i>
    
  </div>
  
    <div class="bg-img">
      <img src="http://raw.githubusercontent.com/Jeffrey28/Figurebed/master/img/20200413111822.jpg" />
    </div>
  
  
  
</div>
<script>

  let sideBarOpen = 'sidebar-open';
  let body = document.body;
  let back2Top = document.querySelector('#back_to_top'),
  back2TopText = document.querySelector('#back_to_top_text'),
  drawerBox = document.querySelector('#drawer_box'),
  rightSideBar = document.querySelector('.sidebar'),
  viewport = document.querySelector('body');

  function scrollAnimation(currentY, targetY) {
   
    let needScrollTop = targetY - currentY
    let _currentY = currentY
    setTimeout(() => {
      const dist = Math.ceil(needScrollTop / 10)
      _currentY += dist
      window.scrollTo(_currentY, currentY)
      if (needScrollTop > 10 || needScrollTop < -10) {
        scrollAnimation(_currentY, targetY)
      } else {
        window.scrollTo(_currentY, targetY)
      }
    }, 1)
  }

  back2Top.addEventListener("click", function(e) {
    scrollAnimation(document.scrollingElement.scrollTop, 0);
    e.stopPropagation();
    return false;
  });
  
  window.addEventListener('scroll', function(e) {
    let percent = document.scrollingElement.scrollTop / (document.scrollingElement.scrollHeight - document.scrollingElement.clientHeight) * 100;
    if (percent > 1 && !back2Top.classList.contains('back-top-active')) {
      back2Top.classList.add('back-top-active');
    }
    if (percent == 0) {
      back2Top.classList.remove('back-top-active');
    }
    if (back2TopText) {
      back2TopText.textContent = Math.floor(percent);
    }
  });

  
  let hasCacu = false;
  window.onresize = function() {
    if (window.width > 991) {
      calcuHeight();
    } else {
      hasCacu = false;
    }
  }

  function calcuHeight() {
    // 动态调整站点概览高度
    if (!hasCacu && back2Top.classList.contains('pisces') || back2Top.classList.contains('gemini')) {
      let sideBar = document.querySelector('.sidebar');
      let navUl = document.querySelector('#site_nav');
      sideBar.style = 'margin-top:' + (navUl.offsetHeight + navUl.offsetTop + 15) + 'px;';
      hasCacu = true;
    }
  }
  calcuHeight();
  
  let open = false, MOTION_TIME = 300, RIGHT_MOVE_DIS = '320px';

  if (drawerBox) {
    let rightMotions = document.querySelectorAll('.right-motion');
    let right = drawerBox.classList.contains('right');

    let transitionDir = right ? "transition.slideRightIn" : "transition.slideLeftIn";

    let openProp, closeProp;
    if (right) {
      openProp = {
        paddingRight: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingRight: '0px'
      };
    } else {
      openProp = {
        paddingLeft: RIGHT_MOVE_DIS 
      };
      closeProp = {
        paddingLeft: '0px'
      };
    }

    drawerBox.onclick = function() {
      open = !open;
      window.Velocity(rightSideBar, 'stop');
      window.Velocity(viewport, 'stop');
      window.Velocity(rightMotions, 'stop');
      if (open) {
        window.Velocity(rightSideBar, {
          width: RIGHT_MOVE_DIS
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, transitionDir,{ });
          }
        })
        window.Velocity(viewport, openProp,{
          duration: MOTION_TIME
        });
      } else {
        window.Velocity(rightSideBar, {
          width: '0px'
        }, {
          duration: MOTION_TIME,
          begin: function() {
            window.Velocity(rightMotions, {
              opacity: 0
            });
          }
        })
        window.Velocity(viewport, closeProp ,{
          duration: MOTION_TIME
        });
      }
      for (let i = 0; i < drawerBox.children.length; i++) {
        drawerBox.children[i].classList.toggle('muse-line');
      }
      drawerBox.classList.toggle(sideBarOpen);
    }
  }

  // 链接跳转
  let newWindow = 'true'
  if (newWindow === 'true') {
    let links = document.querySelectorAll('.post-body a')
    links.forEach(item => {
      if (!item.classList.contains('btn')) {
        item.setAttribute("target","_blank");
      }
    })
  }
  // 代码高亮
  hljs.initHighlightingOnLoad();

</script>
      <div class="light-box" id="light_box"></div>
<script>
  let imgs = document.querySelectorAll('.post-body img');
  let lightBox = document.querySelector('#light_box');
  lightBox.addEventListener('mousedown', (e) => {
    e.preventDefault()
  })
  lightBox.addEventListener('mousewheel', (e) => {
    e.preventDefault()
  })
  let width = window.innerWidth * 0.8;
  lightBox.onclick= () => {
    let img = lightBox.querySelector('img');
    lightBox.style = '';
    img && img.remove();
  }
  imgs.forEach(item => {
    item.onclick = function(e) {
      let lightImg = document.createElement('img');
      lightImg.src = this.src;
      lightBox.style = `height: 100%; opacity: 1; background-color: rgba(0, 0, 0, 0.5);cursor: zoom-out;`;
      lightImg.style = `width: ${width}px; border: 1px solid #fff; border-radius: 2px;`;
      lightImg.onclick = function() {
        lightBox.style = '';
        this.remove();
      }
      lightBox.append(lightImg);
    }
  })
</script>
    </div>
  </body>
  <script src="/media/js/motion.js"></script>
</html>
